<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module trade_utils</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>trade_utils</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/gcallah/TandonDevOps/IndraABM/capital/trade_utils.py">/Users/gcallah/TandonDevOps/IndraABM/capital/trade_utils.py</a></font></td></tr></table>
    <p><tt>This&nbsp;file&nbsp;contains&nbsp;general&nbsp;functions&nbsp;useful&nbsp;in&nbsp;trading&nbsp;goods.</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="copy.html">copy</a><br>
</td><td width="25%" valign=top><a href="random.html">random</a><br>
</td><td width="25%" valign=top></td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="builtins.html#object">builtins.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="trade_utils.html#TradeState">TradeState</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="TradeState">class <strong>TradeState</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt><a href="#TradeState">TradeState</a>(trader1,&nbsp;trader2,&nbsp;good1=None,&nbsp;amt1=0,&nbsp;good2=None,&nbsp;amt2=0,&nbsp;status=3)<br>
&nbsp;<br>
A&nbsp;class&nbsp;to&nbsp;track&nbsp;the&nbsp;state&nbsp;of&nbsp;a&nbsp;trade.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="TradeState-__init__"><strong>__init__</strong></a>(self, trader1, trader2, good1=None, amt1=0, good2=None, amt2=0, status=3)</dt><dd><tt>Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;good1:&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;good&nbsp;offered&nbsp;first<br>
&nbsp;&nbsp;&nbsp;&nbsp;amt1:&nbsp;the&nbsp;amount&nbsp;of&nbsp;that&nbsp;good&nbsp;offered&nbsp;at&nbsp;this&nbsp;point<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;negotiations<br>
&nbsp;&nbsp;&nbsp;&nbsp;good2:&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;good&nbsp;offered&nbsp;in&nbsp;return&nbsp;for&nbsp;good1<br>
&nbsp;&nbsp;&nbsp;&nbsp;amt2:&nbsp;the&nbsp;amount&nbsp;of&nbsp;that&nbsp;good&nbsp;offered&nbsp;at&nbsp;this&nbsp;point<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;negotiations<br>
&nbsp;&nbsp;&nbsp;&nbsp;status:&nbsp;current&nbsp;state&nbsp;of&nbsp;this&nbsp;trade</tt></dd></dl>

<dl><dt><a name="TradeState-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><tt>Return&nbsp;repr(self).</tt></dd></dl>

<dl><dt><a name="TradeState-__str__"><strong>__str__</strong></a>(self)</dt><dd><tt>Return&nbsp;str(self).</tt></dd></dl>

<dl><dt><a name="TradeState-get_good"><strong>get_good</strong></a>(self, which_side)</dt></dl>

<dl><dt><a name="TradeState-get_other"><strong>get_other</strong></a>(self, which_side)</dt></dl>

<dl><dt><a name="TradeState-get_side"><strong>get_side</strong></a>(self, which_side)</dt></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-adj_add_good"><strong>adj_add_good</strong></a>(agent, good, amt, comp=None)</dt></dl>
 <dl><dt><a name="-adj_add_good_w_comp"><strong>adj_add_good_w_comp</strong></a>(agent, good, amt, old_amt)</dt></dl>
 <dl><dt><a name="-adjust_dura"><strong>adjust_dura</strong></a>(trader, good, val)</dt><dd><tt>This&nbsp;function&nbsp;will&nbsp;check&nbsp;if&nbsp;durability&nbsp;is&nbsp;an&nbsp;attribute&nbsp;of<br>
the&nbsp;goods.&nbsp;If&nbsp;so,&nbsp;utility&nbsp;will&nbsp;be&nbsp;adjusted&nbsp;by&nbsp;durability.</tt></dd></dl>
 <dl><dt><a name="-bear_util_func"><strong>bear_util_func</strong></a>(qty, divisibility=None)</dt></dl>
 <dl><dt><a name="-cat_util_func"><strong>cat_util_func</strong></a>(qty, divisibility=None)</dt></dl>
 <dl><dt><a name="-check_complement"><strong>check_complement</strong></a>(trader)</dt><dd><tt>see&nbsp;if&nbsp;COMPLEMENT&nbsp;is&nbsp;an&nbsp;attribute&nbsp;in&nbsp;trader</tt></dd></dl>
 <dl><dt><a name="-check_div"><strong>check_div</strong></a>(trader, good)</dt><dd><tt>This&nbsp;function&nbsp;will&nbsp;check&nbsp;if&nbsp;divisibility&nbsp;is&nbsp;an&nbsp;attribute&nbsp;of<br>
the&nbsp;goods.&nbsp;If&nbsp;so,&nbsp;the&nbsp;function&nbsp;will&nbsp;return&nbsp;divisibility;<br>
else,&nbsp;the&nbsp;function&nbsp;will&nbsp;return&nbsp;1.</tt></dd></dl>
 <dl><dt><a name="-compl_lst"><strong>compl_lst</strong></a>(agent, good)</dt><dd><tt>return&nbsp;the&nbsp;complimentary&nbsp;list&nbsp;of&nbsp;this&nbsp;good</tt></dd></dl>
 <dl><dt><a name="-endow"><strong>endow</strong></a>(trader, avail_goods, equal=False, rand=False, comp=False)</dt><dd><tt>This&nbsp;function&nbsp;is&nbsp;going&nbsp;to&nbsp;pick&nbsp;a&nbsp;good&nbsp;at&nbsp;random,&nbsp;and&nbsp;give&nbsp;the<br>
trader&nbsp;all&nbsp;of&nbsp;it,&nbsp;by&nbsp;default.&nbsp;We&nbsp;will&nbsp;write&nbsp;partial&nbsp;distributions<br>
later.</tt></dd></dl>
 <dl><dt><a name="-equal_dist"><strong>equal_dist</strong></a>(num_trader, to_goods, from_goods, comp=False)</dt><dd><tt>each&nbsp;trader&nbsp;get&nbsp;equal&nbsp;amount&nbsp;of&nbsp;goods<br>
to_goods&nbsp;=&nbsp;trader[GOODS],&nbsp;from_goods&nbsp;=&nbsp;avail_goods</tt></dd></dl>
 <dl><dt><a name="-exec_trade"><strong>exec_trade</strong></a>(trade_state)</dt></dl>
 <dl><dt><a name="-gen_util_func"><strong>gen_util_func</strong></a>(qty, divisibility)</dt></dl>
 <dl><dt><a name="-get_lowest"><strong>get_lowest</strong></a>(agent, my_good, their_good, bidder=True)</dt><dd><tt>This&nbsp;function&nbsp;will&nbsp;get&nbsp;the&nbsp;max&nbsp;a&nbsp;bidder&nbsp;want&nbsp;to&nbsp;give&nbsp;up&nbsp;or<br>
the&nbsp;min&nbsp;a&nbsp;reciever&nbsp;want&nbsp;to&nbsp;accept.</tt></dd></dl>
 <dl><dt><a name="-get_rand_good"><strong>get_rand_good</strong></a>(goods_dict, nonzero=False)</dt><dd><tt>What&nbsp;should&nbsp;this&nbsp;do&nbsp;with&nbsp;empty&nbsp;dict?</tt></dd></dl>
 <dl><dt><a name="-get_util_func"><strong>get_util_func</strong></a>(fname)</dt></dl>
 <dl><dt><a name="-good_all_gone"><strong>good_all_gone</strong></a>(agent, g)</dt><dd><tt>Check&nbsp;if&nbsp;this&nbsp;agent&nbsp;no&nbsp;longer&nbsp;has&nbsp;this&nbsp;good</tt></dd></dl>
 <dl><dt><a name="-goods_to_str"><strong>goods_to_str</strong></a>(goods)</dt><dd><tt>take&nbsp;a&nbsp;goods&nbsp;dict&nbsp;to&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-incr_util"><strong>incr_util</strong></a>(good_dict, good, amt=None, agent=None, graph=False, comp=None)</dt><dd><tt>if&nbsp;graph=True,&nbsp;increase&nbsp;the&nbsp;utility&nbsp;according&nbsp;to<br>
the&nbsp;weight&nbsp;of&nbsp;edge&nbsp;in&nbsp;the&nbsp;graph</tt></dd></dl>
 <dl><dt><a name="-is_compl_good"><strong>is_compl_good</strong></a>(agent, good)</dt><dd><tt>check&nbsp;if&nbsp;this&nbsp;good&nbsp;is&nbsp;a&nbsp;comp&nbsp;of&nbsp;other&nbsp;goods&nbsp;that&nbsp;the&nbsp;agent&nbsp;have</tt></dd></dl>
 <dl><dt><a name="-is_complement"><strong>is_complement</strong></a>(trader, good, comp)</dt><dd><tt>see&nbsp;if&nbsp;'comp'&nbsp;is&nbsp;complement&nbsp;of&nbsp;'good'</tt></dd></dl>
 <dl><dt><a name="-is_depleted"><strong>is_depleted</strong></a>(goods_dict)</dt><dd><tt>See&nbsp;if&nbsp;`goods_dict`&nbsp;has&nbsp;any&nbsp;non-zero&nbsp;amount&nbsp;of&nbsp;goods&nbsp;in&nbsp;it.</tt></dd></dl>
 <dl><dt><a name="-negotiate"><strong>negotiate</strong></a>(trade, trader_distance=1)</dt><dd><tt>See&nbsp;if&nbsp;these&nbsp;two&nbsp;traders&nbsp;(held&nbsp;in&nbsp;`trade`&nbsp;can&nbsp;strike&nbsp;a&nbsp;deal.</tt></dd></dl>
 <dl><dt><a name="-new_good"><strong>new_good</strong></a>(old_amt, amt)</dt></dl>
 <dl><dt><a name="-penguin_util_func"><strong>penguin_util_func</strong></a>(qty, divisibility=None)</dt></dl>
 <dl><dt><a name="-rand_dist"><strong>rand_dist</strong></a>(to_goods, from_goods, comp=False)</dt><dd><tt>Pick&nbsp;a&nbsp;random&nbsp;good&nbsp;and&nbsp;transfer&nbsp;a&nbsp;random&nbsp;amount&nbsp;of&nbsp;it&nbsp;to&nbsp;trader.</tt></dd></dl>
 <dl><dt><a name="-rand_goods_list"><strong>rand_goods_list</strong></a>(goods)</dt></dl>
 <dl><dt><a name="-seek_a_trade"><strong>seek_a_trade</strong></a>(agent, comp=False, size=None)</dt><dd><tt>Find&nbsp;closest&nbsp;agent&nbsp;and&nbsp;see&nbsp;if&nbsp;we&nbsp;can&nbsp;trade&nbsp;with&nbsp;them.</tt></dd></dl>
 <dl><dt><a name="-seek_a_trade_w_comp"><strong>seek_a_trade_w_comp</strong></a>(agent, **kwargs)</dt></dl>
 <dl><dt><a name="-steep_util_func"><strong>steep_util_func</strong></a>(qty, divisibility=None)</dt></dl>
 <dl><dt><a name="-test_util_func"><strong>test_util_func</strong></a>(f, max, d)</dt></dl>
 <dl><dt><a name="-trade"><strong>trade</strong></a>(agent, my_good, my_amt, counterparty, their_good, their_amt, comp=None)</dt></dl>
 <dl><dt><a name="-trade_acceptable"><strong>trade_acceptable</strong></a>(trade_state, which_side)</dt><dd><tt>Is&nbsp;the&nbsp;trade&nbsp;acceptable&nbsp;to&nbsp;`which_side`?</tt></dd></dl>
 <dl><dt><a name="-trade_debug"><strong>trade_debug</strong></a>(agent1, agent2, good1, good2, amt1, amt2, gain, loss)</dt></dl>
 <dl><dt><a name="-trade_state_to_str"><strong>trade_state_to_str</strong></a>(state)</dt><dd><tt>convert&nbsp;integer&nbsp;value&nbsp;of&nbsp;ans&nbsp;to&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-transfer"><strong>transfer</strong></a>(to_goods, from_goods, good_nm, amt=None, comp=False)</dt><dd><tt>Transfer&nbsp;goods&nbsp;between&nbsp;two&nbsp;goods&nbsp;dicts.<br>
Use&nbsp;`amt`&nbsp;if&nbsp;it&nbsp;is&nbsp;not&nbsp;None.</tt></dd></dl>
 <dl><dt><a name="-utility_delta"><strong>utility_delta</strong></a>(agent, good, change)</dt><dd><tt>We&nbsp;are&nbsp;going&nbsp;to&nbsp;determine&nbsp;the&nbsp;utility&nbsp;of&nbsp;goods&nbsp;gained<br>
(amt&nbsp;is&nbsp;positive)&nbsp;or&nbsp;lost&nbsp;(amt&nbsp;is&nbsp;negative).<br>
`change`&nbsp;will&nbsp;be&nbsp;fractional&nbsp;if&nbsp;good&nbsp;divisibility&nbsp;&lt;&nbsp;1</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>ACCEPT</strong> = 1<br>
<strong>AMT_AVAIL</strong> = 'amt_available'<br>
<strong>COMPLEMENTS</strong> = 'complementaries'<br>
<strong>DEBUG</strong> = &lt;lib.utils.Debug object&gt;<br>
<strong>DEF_MAX_UTIL</strong> = 20<br>
<strong>DIGITS_TO_RIGHT</strong> = 2<br>
<strong>DIM_UTIL_BASE</strong> = 1.1<br>
<strong>ESSENTIALLY_ZERO</strong> = 0.0001<br>
<strong>GEN_UTIL_FUNC</strong> = 'gen_util_func'<br>
<strong>GOODS</strong> = 'goods'<br>
<strong>INADEQ</strong> = 0<br>
<strong>INIT1</strong> = 3<br>
<strong>INIT2</strong> = 2<br>
<strong>NO_TRADER</strong> = -2<br>
<strong>OFFER_FROM_1</strong> = 5<br>
<strong>OFFER_FROM_2</strong> = 4<br>
<strong>REJECT</strong> = -1<br>
<strong>STEEP_GRADIENT</strong> = 20<br>
<strong>TEST_GOODS_DICT</strong> = {'honey': {'amt_available': 20}, 'molasses': {'amt_available': 30}, 'stevia': {'amt_available': 0}, 'sugar': {'amt_available': 10}}<br>
<strong>TRADER1</strong> = 0<br>
<strong>TRADER2</strong> = 1<br>
<strong>TRADE_STATUS</strong> = 0<br>
<strong>UTIL_FUNC</strong> = 'util_func'<br>
<strong>max_util</strong> = 20<br>
<strong>trade_state_dict</strong> = {-2: 'No Trader', -1: 'Reject', 0: 'Inadequate', 1: 'Accept', 2: 'Init 2', 3: 'Init 1', 4: 'Offer 2', 5: 'Offer 1'}<br>
<strong>util_funcs</strong> = {'bear_util_func': &lt;function bear_util_func&gt;, 'cat_util_func': &lt;function cat_util_func&gt;, 'gen_util_func': &lt;function gen_util_func&gt;, 'penguin_util_func': &lt;function penguin_util_func&gt;, 'steep_util_func': &lt;function steep_util_func&gt;}</td></tr></table>
</body></html>